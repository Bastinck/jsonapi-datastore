function JsonApiDataStoreModel(t,i){this.id=i,this._type=t,this._attributes=[],this._relationships=[]}function JsonApiDataStore(){this.graph={}}JsonApiDataStoreModel.prototype.serialize=function(){var t,i=this;return t={data:{type:this._type,id:this.id}},0!==this._attributes.length&&(t.data.attributes={}),0!==this._relationships.length&&(t.data.relationships={}),this._attributes.forEach(function(a){t.data.attributes[a]=i[a]}),this._relationships.forEach(function(a){function r(t){return{type:t._type,id:t.id}}t.data.relationships[a]=i[a].constructor===Array?{data:i[a].map(r)}:{data:r(i[a])}}),t},JsonApiDataStore.prototype.reset=function(){this.graph={}},JsonApiDataStore.prototype.find=function(t,i){return this.graph[t]&&this.graph[t][i]?this.graph[t][i]:null},JsonApiDataStore.prototype.destroy=function(t){delete this.graph[t._type][t.id]},JsonApiDataStore.prototype.initModel=function(t,i){return this.graph[t]||(this.graph[t]={}),this.graph[t][i]||(this.graph[t][i]=new JsonApiDataStoreModel(t,i)),this.graph[t][i]},JsonApiDataStore.prototype.syncRecord=function(t){function i(t){if(!r.find(t.type,t.id)){var i=r.initModel(t.type,t.id);i._placeHolder=!0}return r.graph[t.type][t.id]}var a,r=this,e=this.initModel(t.type,t.id);delete e._placeHolder;for(a in t.attributes)e._attributes.push(a),e[a]=t.attributes[a];if(t.relationships)for(a in t.relationships){var n=t.relationships[a];void 0!==n.data&&(e._relationships.push(a),e[a]=null===n.data?null:n.data.constructor===Array?n.data.map(i):i(n.data)),n.links&&console.log("Warning: Links not implemented yet.")}return e},JsonApiDataStore.prototype.sync=function(t){function i(t){return t?t.constructor===Array?t.map(a.syncRecord.bind(a)):a.syncRecord(t):null}var a=this;return i(t.included),i(t.data)};